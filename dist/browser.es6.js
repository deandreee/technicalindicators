(function(e){"use strict";function r(e){return Z[e]}function t(e){const t=r("precision");return t?parseFloat(e.toPrecision(t)):e}function o(e){ee.reverseInputs(e);const r=new re(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function l(e){ee.reverseInputs(e);const r=new te(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function a(e){ee.reverseInputs(e);const r=new oe(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function n(e){ee.reverseInputs(e);const r=new le(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function s(e){ee.reverseInputs(e);const r=new ae(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function u(e){ee.reverseInputs(e);const r=new ne(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function i(e){ee.reverseInputs(e);const r=new se(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function h(e){ee.reverseInputs(e);const r=new ue(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function p(e){ee.reverseInputs(e);const r=new ie(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function g(e){ee.reverseInputs(e);const r=new he(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function d(e){ee.reverseInputs(e);const r=new ve(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function v(e){ee.reverseInputs(e);const r=new me(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function c(e){ee.reverseInputs(e);const r=new xe(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function m(e){ee.reverseInputs(e);const r=new we(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function x(e){ee.reverseInputs(e);const r=new fe(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function w(e){ee.reverseInputs(e);const r=new Ie(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function f(e){ee.reverseInputs(e);const r=new _e(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function I(e){ee.reverseInputs(e);const r=new Pe(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function _(e){ee.reverseInputs(e);const r=new be(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function P(e){ee.reverseInputs(e);const r=new Ce(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function b(e){ee.reverseInputs(e);const r=new qe(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function C(e){ee.reverseInputs(e);const r=new Ee(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function q(e){ee.reverseInputs(e);const r=new Se(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function E(e){ee.reverseInputs(e);const r=new Ve(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function S(e){ee.reverseInputs(e);const r=new ke(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function V(e,r,t,o){return e<=t&&r>=t||t<=e&&o>=e}function k(e){ee.reverseInputs(e);const r=new He(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function H(e){ee.reverseInputs(e);const r=new Be(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function z(e){ee.reverseInputs(e);const r=new Ae(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function B(e){ee.reverseInputs(e);const r=new Le(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function A(e){ee.reverseInputs(e);const r=new Te(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function L(e){ee.reverseInputs(e);const r=new Me(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function T(e){ee.reverseInputs(e);const r=new De(e).result;return e.reversedInput&&(r.open.reverse(),r.high.reverse(),r.low.reverse(),r.close.reverse(),r.volume.reverse(),r.timestamp.reverse()),ee.reverseInputs(e),r}function M(e){ee.reverseInputs(e);const r=new Re(e).result;return e.reversedInput&&(r.open.reverse(),r.high.reverse(),r.low.reverse(),r.close.reverse(),r.volume.reverse(),r.timestamp.reverse()),ee.reverseInputs(e),r}function D(e){return new ye().hasPattern(e)}function R(e){return new Ue().hasPattern(e)}function j(e){return new Xe().hasPattern(e)}function O(e){return new Ne().hasPattern(e)}function y(e){ee.reverseInputs(e);const r=new qr(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function F(e){ee.reverseInputs(e);const r=new Er(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function W(e){ee.reverseInputs(e);const r=new Sr(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}function U(){return["sma","ema","wma","wema","macd","rsi","bollingerbands","adx","atr","truerange","roc","kst","psar","stochastic","williamsr","adl","obv","trix","cci","awesomeoscillator","forceindex","vwap","volumeprofile","renko","heikinashi","stochasticrsi","mfi","averagegain","averageloss","highest","lowest","sum","FixedSizeLinkedList","sd","bullish","bearish","abandonedbaby","doji","bearishengulfingpattern","bullishengulfingpattern","darkcloudcover","downsidetasukigap","dragonflydoji","gravestonedoji","bullishharami","bearishharami","bullishharamicross","bearishharamicross","eveningdojistar","eveningstar","morningdojistar","morningstar","bullishmarubozu","bearishmarubozu","piercingline","bullishspinningtop","bearishspinningtop","threeblackcrows","threewhitesoldiers","bullishhammerstick","bearishhammerstick","bullishinvertedhammerstick","bearishinvertedhammerstick","hammerpattern","hammerpatternunconfirmed","hangingman","hangingmanunconfirmed","shootingstar","shootingstarunconfirmed","tweezertop","tweezerbottom","predictPattern","hasDoubleBottom","hasDoubleTop","hasHeadAndShoulder","hasInverseHeadAndShoulder","isTrendingUp","isTrendingDown","ichimokucloud","keltnerchannels","chandelierexit"]}var K=Math.min,G=Math.max,X=Math.abs;class N{constructor(e,r,t){this.next=t,t&&(t.prev=this),this.prev=r,r&&(r.next=this),this.data=e}}class J{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new N(e,this._tail),0===this._length&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){const e=this._tail;if(0!==this._length)return(this._length--,0===this._length)?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){const e=this._head;if(0!==this._length)return(this._length--,0===this._length)?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new N(e,void 0,this._head),0===this._length&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){const e=this._current;return e===this._head||2>this._length?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){const e=this._current;if(0!==this._length)return(this._length--,0===this._length)?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){const e=this._next;if(void 0!==e)return this._next=e.next,this._current=e,e.data}}class Q extends J{constructor(e,r,t,o){if(super(),this.size=e,this.maintainHigh=r,this.maintainLow=t,this.maintainSum=o,this.totalPushed=0,this.periodHigh=0,this.periodLow=Infinity,this.periodSum=0,!e||"number"!=typeof e)throw new Error("Size required and should be a number.");this._push=this.push,this.push=(e)=>{this.add(e),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift===this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift===this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum-=this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum+=e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}class Y{constructor(){this.open=[],this.high=[],this.low=[],this.close=[],this.volume=[],this.timestamp=[]}}const Z={};class ${}class ee{static reverseInputs(e){e.reversedInput&&(e.values?e.values.reverse():void 0,e.open?e.open.reverse():void 0,e.high?e.high.reverse():void 0,e.low?e.low.reverse():void 0,e.close?e.close.reverse():void 0,e.volume?e.volume.reverse():void 0,e.timestamp?e.timestamp.reverse():void 0)}constructor(e){this.format=e.format||t}getResult(){return this.result}}class re extends ee{constructor(e){super(e),this.period=e.period,this.price=e.values;this.generator=function*(e){const r=new J;let t,o=0,l=1,a=yield;for(r.push(0);;)l<e?(l++,r.push(a),o+=a):(o=o-r.shift()+a,t=o/e,r.push(a)),a=yield t}(this.period),this.generator.next(),this.result=[],this.price.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(this.format(r.value))})}nextValue(e){const r=this.generator.next(e).value;if(r!==void 0)return this.format(r)}}re.calculate=o;class te extends ee{constructor(e){super(e);const r=e.period,t=e.values;let o;this.result=[],o=new re({period:r,values:[]});this.generator=function*(){for(let e,t=yield;;)void 0!=e&&void 0!==t?(e=(t-e)*(2/(r+1))+e,t=yield e):(t=yield,e=o.nextValue(t),e&&(t=yield e))}(),this.generator.next(),this.generator.next(),t.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(this.format(r.value))})}nextValue(e){const r=this.generator.next(e).value;if(r!==void 0)return this.format(r)}}te.calculate=l;class oe extends ee{constructor(e){super(e);const r=e.period,t=e.values;this.result=[],this.generator=function*(){for(const e=new J;;)if(e.length<r)e.push((yield));else{e.resetCursor();let t=0;for(let o=1;o<=r;o++)t+=e.next()*o/(r*(r+1)/2);const o=yield t;e.shift(),e.push(o)}}(),this.generator.next(),t.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(this.format(r.value))})}nextValue(e){const r=this.generator.next(e).value;if(r!==void 0)return this.format(r)}}oe.calculate=a;class le extends ee{constructor(e){super(e);const r=e.period,t=e.values;let o;this.result=[],o=new re({period:r,values:[]});this.generator=function*(){for(let e,t=yield;;)void 0!=e&&void 0!==t?(e=(t-e)*(1/r)+e,t=yield e):(t=yield,e=o.nextValue(t),void 0!==e&&(t=yield e))}(),this.generator.next(),this.generator.next(),t.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(this.format(r.value))})}nextValue(e){const r=this.generator.next(e).value;if(r!==void 0)return this.format(r)}}le.calculate=n;class ae extends ee{constructor(e){super(e);const r=e.SimpleMAOscillator?re:te,t=e.SimpleMASignal?re:te,o=new r({period:e.fastPeriod,values:[],format:(e)=>e}),l=new r({period:e.slowPeriod,values:[],format:(e)=>e}),a=new t({period:e.signalPeriod,values:[],format:(e)=>e}),n=this.format;this.result=[],this.generator=function*(){for(let r,t,s,u,i,h,p=0;;){if(p<e.slowPeriod){r=yield,i=o.nextValue(r),h=l.nextValue(r),p++;continue}i&&h&&(t=i-h,s=a.nextValue(t)),u=t-s,r=yield{MACD:n(t),signal:s?n(s):void 0,histogram:isNaN(u)?void 0:n(u)},i=o.nextValue(r),h=l.nextValue(r)}}(),this.generator.next(),e.values.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){const r=this.generator.next(e).value;return r}}ae.calculate=s;class ne extends ee{constructor(e){super(e);const r=e.values,t=e.period,o=this.format;this.generator=function*(e){let r,t,l=yield,a=1,n=0,s=l;for(l=yield;;)t=l-s,t=0<t?t:0,0<t&&(n+=t),a<e?a++:void 0==r?r=n/e:r=(r*(e-1)+t)/e,s=l,r=void 0===r?void 0:o(r),l=yield r}(t),this.generator.next(),this.result=[],r.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}ne.calculate=u;class se extends ee{constructor(e){super(e);const r=e.values,t=e.period,o=this.format;this.generator=function*(e){let r,t,l=yield,a=1,n=0,s=l;for(l=yield;;)t=s-l,t=0<t?t:0,0<t&&(n+=t),a<e?a++:void 0==r?r=n/e:r=(r*(e-1)+t)/e,s=l,r=void 0===r?void 0:o(r),l=yield r}(t),this.generator.next(),this.result=[],r.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}se.calculate=i;class ue extends ee{constructor(e){super(e);const r=e.period,t=e.values,o=new ne({period:r,values:[]}),l=new se({period:r,values:[]});let a=1;this.generator=function*(){for(let e,r,t,n,s=yield;;)e=o.nextValue(s),r=l.nextValue(s),void 0!==e&&void 0!==r&&(0===r?n=100:0===e?n=0:(t=e/r,t=isNaN(t)?0:t,n=parseFloat((100-100/(1+t)).toFixed(2)))),a++,s=yield n}(r),this.generator.next(),this.result=[],t.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}ue.calculate=h;class ie extends ee{constructor(e){super(e);const r=e.period,t=e.values,o=new re({period:r,values:[],format:(e)=>e});this.result=[],this.generator=function*(){let e,t;const l=new Q(r);e=yield;for(let a;;){if(l.push(e),t=o.nextValue(e),t){let e=0;for(const r of l.iterator())e+=Math.pow(r-t,2);a=Math.sqrt(e/r)}e=yield a}}(),this.generator.next(),t.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(this.format(r.value))})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return this.format(r.value)}}ie.calculate=p;class he extends ee{constructor(e){super(e);const r=e.period,t=e.values,o=e.stdDev,l=this.format;let a,n;this.result=[],a=new re({period:r,values:[],format:(e)=>e}),n=new ie({period:r,values:[],format:(e)=>e}),this.generator=function*(){let e,r,t,s;for(r=yield;;){if(t=a.nextValue(r),s=n.nextValue(r),t){const a=l(t),n=l(t+s*o),u=l(t-s*o),i=l((r-u)/(n-u));e={middle:a,upper:n,lower:u,pb:i}}r=yield e}}(),this.generator.next(),t.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}he.calculate=g;class pe extends ee{constructor(e){super(e),this.period=e.period,this.price=e.values;this.generator=function*(e){new J;for(let r=0,t=1,o=yield,l=0;;)t<e?(t++,r+=o,l=void 0):t===e?(t++,r+=o,l=r):l=l-l/e+o,o=yield l}(this.period),this.generator.next(),this.result=[],this.price.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(this.format(r.value))})}nextValue(e){const r=this.generator.next(e).value;if(r!==void 0)return this.format(r)}}pe.calculate=function(e){ee.reverseInputs(e);const r=new pe(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r};class ge extends ee{static calculate(e){ee.reverseInputs(e);const r=new ge(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}constructor(e){super(e);const r=e.low,t=e.high,o=this.format;if(r.length!==t.length)throw new Error("Inputs(low,high) not of equal size");this.result=[],this.generator=function*(){for(let e,r,t=yield;;){if(r){const l=t.high-r.high,a=r.low-t.low;e=o(a>l&&0<a?a:0)}r=t,t=yield e}}(),this.generator.next(),r.forEach((e,o)=>{const l=this.generator.next({high:t[o],low:r[o]});l.value!==void 0&&this.result.push(l.value)})}nextValue(e){return this.generator.next(e).value}}class de extends ee{static calculate(e){ee.reverseInputs(e);const r=new de(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r}constructor(e){super(e);const r=e.low,t=e.high,o=this.format;if(r.length!==t.length)throw new Error("Inputs(low,high) not of equal size");this.result=[],this.generator=function*(){for(let e,r,t=yield;;){if(r){const l=t.high-r.high,a=r.low-t.low;e=o(l>a&&0<l?l:0)}r=t,t=yield e}}(),this.generator.next(),r.forEach((e,o)=>{const l=this.generator.next({high:t[o],low:r[o]});l.value!==void 0&&this.result.push(l.value)})}nextValue(e){return this.generator.next(e).value}}class ve extends ee{constructor(e){super(e);const r=e.low,t=e.high,o=e.close,l=this.format;if(r.length!==t.length)throw new Error("Inputs(low,high) not of equal size");this.result=[],this.generator=function*(){for(let e,r,t=yield;;)void 0==e&&(e=t.close,t=yield r),r=G(t.high-t.low,isNaN(X(t.high-e))?0:X(t.high-e),isNaN(X(t.low-e))?0:X(t.low-e)),e=t.close,void 0!==r&&(r=l(r)),t=yield r}(),this.generator.next(),r.forEach((e,l)=>{const a=this.generator.next({high:t[l],low:r[l],close:o[l]});a.value!==void 0&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}ve.calculate=d;class ce extends ${}class me extends ee{constructor(e){super(e);const r=e.low,t=e.high,o=e.close,l=e.period,a=this.format,n=new de({high:[],low:[]}),s=new ge({high:[],low:[]}),u=new pe({period:l,values:[],format:(e)=>e}),i=new pe({period:l,values:[],format:(e)=>e}),h=new pe({period:l,values:[],format:(e)=>e}),p=new le({period:l,values:[],format:(e)=>e}),g=new ve({low:[],high:[],close:[]});if(r.length!==t.length||t.length!==o.length)throw new Error("Inputs(low,high, close) not of equal size");this.result=[],ce,this.generator=function*(){let e=yield;let r,t,o,l,a,d,v;for(r=0,t=0,o=0;;){const r=g.nextValue(e),t=n.nextValue(e),o=s.nextValue(e);if(r===void 0){e=yield;continue}const c=h.nextValue(r),m=u.nextValue(t),x=i.nextValue(o);if(c!==void 0&&m!==void 0&&x!==void 0){l=100*m/c,a=100*x/c;const e=X(l-a),r=l+a;d=100*(e/r),v=p.nextValue(d)}e=yield{adx:v,pdi:l,mdi:a}}}(),this.generator.next(),r.forEach((e,l)=>{const n=this.generator.next({high:t[l],low:r[l],close:o[l]});n.value!==void 0&&n.value.adx!==void 0&&this.result.push({adx:a(n.value.adx),pdi:a(n.value.pdi),mdi:a(n.value.mdi)})})}nextValue(e){const r=this.generator.next(e).value;if(r!==void 0&&r.adx!==void 0)return{adx:this.format(r.adx),pdi:this.format(r.pdi),mdi:this.format(r.mdi)}}}me.calculate=v;class xe extends ee{constructor(e){super(e);const r=e.low,t=e.high,o=e.close,l=e.period,a=this.format;if(r.length!==t.length||t.length!==o.length)throw new Error("Inputs(low,high, close) not of equal size");const n=new ve({low:[],high:[],close:[]}),s=new le({period:l,values:[],format:(e)=>e});this.result=[],this.generator=function*(){for(let e,r,t=yield;;)r=n.nextValue({low:t.low,high:t.high,close:t.close}),e=void 0===r?void 0:s.nextValue(r),t=yield e}(),this.generator.next(),r.forEach((e,l)=>{const n=this.generator.next({high:t[l],low:r[l],close:o[l]});n.value!==void 0&&this.result.push(a(n.value))})}nextValue(e){return this.generator.next(e).value}}xe.calculate=c;class we extends ee{constructor(e){super(e);const r=e.period,t=e.values;this.result=[],this.generator=function*(){let e=1;const t=new Q(r);for(let o,l=yield;;)t.push(l),e<r?e++:o=100*((l-t.lastShift)/t.lastShift),l=yield o}(),this.generator.next(),t.forEach((e)=>{const r=this.generator.next(e);r.value===void 0||isNaN(r.value)||this.result.push(this.format(r.value))})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0&&!isNaN(r.value))return this.format(r.value)}}we.calculate=m;class fe extends ee{constructor(e){super(e);const r=e.values,t=e.ROCPer1,o=e.ROCPer2,l=e.ROCPer3,a=e.ROCPer4,n=e.SMAROCPer1,s=e.SMAROCPer2,u=e.SMAROCPer3,i=e.SMAROCPer4,h=e.signalPeriod,p=new we({period:t,values:[]}),g=new we({period:o,values:[]}),d=new we({period:l,values:[]}),v=new we({period:a,values:[]}),c=new re({period:n,values:[],format:(e)=>e}),m=new re({period:s,values:[],format:(e)=>e}),x=new re({period:u,values:[],format:(e)=>e}),w=new re({period:i,values:[],format:(e)=>e}),f=new re({period:h,values:[],format:(e)=>e}),I=this.format;this.result=[];const _=G(t+n,o+s,l+u,a+i);this.generator=function*(){for(let e,r,t,o,l,a,n,s=1,u=yield;;){const i=p.nextValue(u),h=g.nextValue(u),P=d.nextValue(u),b=v.nextValue(u);r=i===void 0?void 0:c.nextValue(i),t=h===void 0?void 0:m.nextValue(h),o=P===void 0?void 0:x.nextValue(P),l=b===void 0?void 0:w.nextValue(b),s<_?s++:e=1*r+2*t+3*o+4*l,a=e===void 0?void 0:f.nextValue(e),n=e===void 0?void 0:{kst:I(e),signal:a?I(a):void 0},u=yield n}}(),this.generator.next(),r.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return r.value}}fe.calculate=x;class Ie extends ee{constructor(e){super(e);const r=e.high||[],t=e.low||[];this.result=[],this.generator=function*(e,r){for(let t,o,l,a,n=!0,s=e,u=yield;;)t?(l+=s*(o-l),n?(l=K(l,a.low,u.low),t.high>o&&(o=t.high,s=K(s+e,r))):(l=G(l,a.high,u.high),t.low<o&&(o=t.low,s=K(s+e,r))),(n&&t.low<l||!n&&t.high>l)&&(s=e,l=o,n=!n,o=n?t.high:t.low)):(l=u.low,o=u.high),a=u,t&&(u=t),t=yield l}(e.step,e.max),this.generator.next(),t.forEach((e,o)=>{const l=this.generator.next({high:r[o],low:t[o]});l.value!==void 0&&this.result.push(l.value)})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return r.value}}Ie.calculate=w;class _e extends ee{constructor(e){super(e);const r=e.low,t=e.high,o=e.close,l=e.period,a=e.signalPeriod,n=this.format;if(r.length!==t.length||t.length!==o.length)throw new Error("Inputs(low,high, close) not of equal size");this.result=[],this.generator=function*(){let e=1;const r=new Q(l,!0,!1),t=new Q(l,!1,!0),o=new re({period:a,values:[],format:(e)=>e});for(let a,s,u=yield;;){if(r.push(u.high),t.push(u.low),e<l){e++,u=yield;continue}const i=t.periodLow;a=100*((u.close-i)/(r.periodHigh-i)),a=isNaN(a)?0:a,s=o.nextValue(a),u=yield{k:n(a),d:void 0===s?void 0:n(s)}}}(),this.generator.next(),r.forEach((e,l)=>{const a=this.generator.next({high:t[l],low:r[l],close:o[l]});a.value!==void 0&&this.result.push(a.value)})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return r.value}}_e.calculate=f;class Pe extends ee{constructor(e){super(e);const r=e.low,t=e.high,o=e.close,l=e.period,a=this.format;if(r.length!==t.length||t.length!==o.length)throw new Error("Inputs(low,high, close) not of equal size");this.result=[],this.generator=function*(){let e=1;const r=new Q(l,!0,!1),t=new Q(l,!1,!0);for(let o,n,s,u=yield;;){if(r.push(u.high),t.push(u.low),e<l){e++,u=yield;continue}o=t.periodLow,n=r.periodHigh,s=a(-100*((n-u.close)/(n-o))),u=yield s}}(),this.generator.next(),r.forEach((e,l)=>{const a=this.generator.next({high:t[l],low:r[l],close:o[l]});a.value!==void 0&&this.result.push(a.value)})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return this.format(r.value)}}Pe.calculate=I;class be extends ee{constructor(e){super(e);const r=e.high,t=e.low,o=e.close,l=e.volume;if(t.length!==r.length||r.length!==o.length||r.length!==l.length)throw new Error("Inputs(low,high, close, volumes) not of equal size");this.result=[],this.generator=function*(){let e,r=0;for(e=yield;;){let t=(e.close-e.low-(e.high-e.close))/(e.high-e.low);t=isNaN(t)?1:t;const o=t*e.volume;r+=o,e=yield Math.round(r)}}(),this.generator.next(),r.forEach((e,r)=>{const a={high:e,low:t[r],close:o[r],volume:l[r]},n=this.generator.next(a);n.value!==void 0&&this.result.push(n.value)})}nextValue(e){return this.generator.next(e).value}}be.calculate=_;class Ce extends ee{constructor(e){super(e);const r=e.close,t=e.volume;this.result=[],this.generator=function*(){let e,r,t=0;for(e=yield,e.close&&"number"==typeof e.close&&(r=e.close,e=yield);;)r<e.close?t+=e.volume:e.close<r&&(t-=e.volume),r=e.close,e=yield t}(),this.generator.next(),r.forEach((e,o)=>{const l={close:r[o],volume:t[o]},a=this.generator.next(l);a.value!==void 0&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}Ce.calculate=P;class qe extends ee{constructor(e){super(e);const r=e.values,t=e.period,o=this.format,l=new te({period:t,values:[],format:(e)=>e}),a=new te({period:t,values:[],format:(e)=>e}),n=new te({period:t,values:[],format:(e)=>e}),s=new we({period:1,values:[],format:(e)=>e});this.result=[],this.generator=function*(){for(let e=yield;;){const r=l.nextValue(e),t=r?a.nextValue(r):void 0,u=t?n.nextValue(t):void 0,i=u?s.nextValue(u):void 0;e=yield i?o(i):void 0}}(),this.generator.next(),r.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return r.value}}qe.calculate=b;class Ee extends ee{constructor(e){super(e);const r=e.close,t=e.volume,o=e.period||1;if(t.length!==r.length)throw new Error("Inputs(volume, close) not of equal size");const l=new te({values:[],period:o});this.result=[],this.generator=function*(){for(let e,r=yield,t=yield;;)e=(t.close-r.close)*t.volume,r=t,t=yield l.nextValue(e)}(),this.generator.next(),t.forEach((e,o)=>{const l=this.generator.next({close:r[o],volume:t[o]});l.value!==void 0&&this.result.push(l.value)})}nextValue(e){const r=this.generator.next(e).value;if(r!==void 0)return r}}Ee.calculate=C;class Se extends ee{constructor(e){super(e);const r=e.low,t=e.high,o=e.close,l=e.period,a=this.format,n=new Q(l),s=new re({period:l,values:[],format:(e)=>e});if(r.length!==t.length||t.length!==o.length)throw new Error("Inputs(low,high, close) not of equal size");this.result=[],this.generator=function*(){for(let e=yield;;){const r=(e.high+e.low+e.close)/3;n.push(r);const t=s.nextValue(r);let o,a=null,u=0;if(t!==void 0){for(const e of n.iterator())u+=X(e-t);a=u/l,o=(r-t)/(.015*a)}e=yield o}}(),this.generator.next(),r.forEach((e,l)=>{const a=this.generator.next({high:t[l],low:r[l],close:o[l]});a.value!==void 0&&this.result.push(a.value)})}nextValue(e){const r=this.generator.next(e).value;if(r!==void 0)return r}}Se.calculate=q;class Ve extends ee{constructor(e){super(e);const r=e.high,t=e.low,o=e.fastPeriod,l=e.slowPeriod,a=new re({values:[],period:l}),n=new re({values:[],period:o});this.result=[],this.generator=function*(){let e,r,t,o,l;for(r=yield;;)t=(r.high+r.low)/2,o=a.nextValue(t),l=n.nextValue(t),void 0!==o&&void 0!==l&&(e=l-o),r=yield e}(),this.generator.next(),r.forEach((e,r)=>{const o={high:e,low:t[r]},l=this.generator.next(o);l.value!==void 0&&this.result.push(this.format(l.value))})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return this.format(r.value)}}Ve.calculate=E;class ke extends ee{constructor(e){super(e);const r=e.low,t=e.high,o=e.close,l=e.volume,a=this.format;if(r.length!==t.length||t.length!==o.length)throw new Error("Inputs(low,high, close) not of equal size");this.result=[],this.generator=function*(){for(let e=yield,r=0,t=0;;){const o=(e.high+e.low+e.close)/3,l=e.volume*o;r+=l,t+=e.volume,e=yield r/t}}(),this.generator.next(),r.forEach((e,a)=>{const n=this.generator.next({high:t[a],low:r[a],close:o[a],volume:l[a]});n.value!==void 0&&this.result.push(n.value)})}nextValue(e){const r=this.generator.next(e).value;if(r!==void 0)return r}}ke.calculate=S;class He extends ee{constructor(e){super(e);const r=e.high,t=e.low,o=e.close,l=e.open,a=e.volume,n=e.noOfBars;if(t.length!==r.length||r.length!==o.length||r.length!==a.length)throw new Error("Inputs(low,high, close, volumes) not of equal size");this.result=[];const s=G(...r,...t,...o,...l),u=K(...r,...t,...o,...l);let i=u;for(let h=0;h<n;h++){const e=i,h=e+(s-u)/n;i=h;let p=0,g=0,d=0;for(let n=0;n<r.length;n++){const s=t[n],u=r[n],i=l[n],v=o[n],c=a[n];V(e,h,s,u)&&(d+=c,i>v?g+=c:p+=c)}this.result.push({rangeStart:e,rangeEnd:h,bullishVolume:p,bearishVolume:g,totalVolume:d})}}nextValue(){throw new Error("Next value not supported for volume profile")}}He.calculate=k;class ze extends ee{constructor(e){super(e),this.result=[],this.generator=function*(){for(let e=yield;;)e=yield(e.high+e.low+e.close)/3}(),this.generator.next(),e.low.forEach((r,t)=>{const o=this.generator.next({high:e.high[t],low:e.low[t],close:e.close[t]});this.result.push(o.value)})}nextValue(e){const r=this.generator.next(e).value;return r}}ze.calculate=function(e){ee.reverseInputs(e);const r=new ze(e).result;return e.reversedInput&&r.reverse(),ee.reverseInputs(e),r};class Be extends ee{constructor(e){super(e);const r=e.high,t=e.low,o=e.close,l=e.volume,a=e.period,n=new ze({low:[],high:[],close:[]}),s=new Q(a,!1,!1,!0),u=new Q(a,!1,!1,!0);if(t.length!==r.length||r.length!==o.length||r.length!==l.length)throw new Error("Inputs(low,high, close, volumes) not of equal size");this.result=[],this.generator=function*(){let e,r,t,o,l,i,h=0,p=null,g=null;for(r=yield,t=r.close,r=yield;;){const{high:t,low:d,close:v,volume:c}=r;let m=0,x=0;p=n.nextValue({high:t,low:d,close:v}),h=p*c,p!==void 0&&g!==void 0&&(p>g?m=h:x=h,s.push(m),u.push(x),o=s.periodSum,i=u.periodSum,s.totalPushed>=a&&s.totalPushed>=a&&(l=o/i,e=100-100/(1+l))),g=p,r=yield e}}(),this.generator.next(),r.forEach((e,r)=>{const a={high:e,low:t[r],close:o[r],volume:l[r]},n=this.generator.next(a);n.value!==void 0&&this.result.push(parseFloat(n.value.toFixed(2)))})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return parseFloat(r.value.toFixed(2))}}Be.calculate=H;class Ae extends ee{constructor(e){super(e);const r=e.values,t=e.rsiPeriod,o=e.stochasticPeriod,l=e.kPeriod,a=e.dPeriod,n=this.format;this.result=[],this.generator=function*(){const e=new ue({period:t,values:[]}),r=new _e({period:o,high:[],low:[],close:[],signalPeriod:l}),n=new re({period:a,values:[],format:(e)=>e});for(let t,o,l,a,s=yield;;){if(t=e.nextValue(s),void 0!==t){const e={high:t,low:t,close:t};o=r.nextValue(e),void 0!==o&&void 0!==o.d&&(l=n.nextValue(o.d),void 0!==l&&(a={stochRSI:o.k,k:o.d,d:l}))}s=yield a}}(),this.generator.next(),r.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return r.value}}Ae.calculate=z;class Le extends ee{constructor(e){super(e);const r=e.values,t=e.period;this.result=[];const o=new Q(t,!0,!1,!1);this.generator=function*(){let e,r;for(e=yield;;)o.push(e),o.totalPushed>=t&&(r=o.periodHigh),e=yield r}(),this.generator.next(),r.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return r.value}}Le.calculate=B;class Te extends ee{constructor(e){super(e);const r=e.values,t=e.period;this.result=[];const o=new Q(t,!1,!0,!1);this.generator=function*(){let e,r;for(e=yield;;)o.push(e),o.totalPushed>=t&&(r=o.periodLow),e=yield r}(),this.generator.next(),r.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return r.value}}Te.calculate=A;class Me extends ee{constructor(e){super(e);const r=e.values,t=e.period;this.result=[];const o=new Q(t,!1,!1,!0);this.generator=function*(){let e,r;for(e=yield;;)o.push(e),o.totalPushed>=t&&(r=o.periodSum),e=yield r}(),this.generator.next(),r.forEach((e)=>{const r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return r.value}}Me.calculate=L;class De extends ee{constructor(e){super(e);const r=this.format,t=e.useATR;let o=e.brickSize||0;if(t){const r=c(Object.assign({},e));o=r[r.length-1],e.atrBrickMultiplier&&(o*=e.atrBrickMultiplier)}if(this.result=new Y,0===o)return void console.error("Not enough data to calculate brickSize for renko when using ATR");let l=0,a=0,n=Infinity,s=0,u=0,i=0;this.generator=function*(){for(let e=yield;;){if(0==l){l=e.close,a=e.high,n=e.low,s=e.close,u=e.volume,i=e.timestamp,e=yield;continue}const r=X(e.close-s),t=X(e.close-l);if(r>=o&&t>=o){const i=r>t?l:s,h={open:i,high:a>e.high?a:e.high,low:n<e.Low?n:e.low,close:i>e.close?i-o:i+o,volume:u+e.volume,timestamp:e.timestamp};l=h.open,a=h.close,n=h.close,s=h.close,u=0,e=yield h}else a=a>e.high?a:e.high,n=n<e.Low?n:e.low,u+=e.volume,i=e.timestamp,e=yield}}(),this.generator.next(),e.low.forEach((r,t)=>{const o=this.generator.next({open:e.open[t],high:e.high[t],low:e.low[t],close:e.close[t],volume:e.volume[t],timestamp:e.timestamp[t]});o.value&&(this.result.open.push(o.value.open),this.result.high.push(o.value.high),this.result.low.push(o.value.low),this.result.close.push(o.value.close),this.result.volume.push(o.value.volume),this.result.timestamp.push(o.value.timestamp))})}nextValue(){return console.error("Cannot calculate next value on Renko, Every value has to be recomputed for every change, use calcualte method"),null}}De.calculate=T;class Re extends ee{constructor(e){super(e);this.format;this.result=new Y;let r=null,t=0,o=Infinity,l=0,a=0,n=0;this.generator=function*(){for(let e=yield,s=null;;){if(null==r)r=(e.close+e.open)/2,t=e.high,o=e.low,l=(e.close+e.open+e.high+e.low)/4,a=e.volume||0,n=e.timestamp||0,s={open:r,high:t,low:o,close:l,volume:e.volume||0,timestamp:e.timestamp||0};else{const a=(e.close+e.open+e.high+e.low)/4,n=(r+l)/2,u=G(n,a,e.high),i=K(e.low,n,a);s={close:a,open:n,high:u,low:i,volume:e.volume||0,timestamp:e.timestamp||0},l=a,r=n,t=u,o=i}e=yield s}}(),this.generator.next(),e.low.forEach((r,t)=>{const o=this.generator.next({open:e.open[t],high:e.high[t],low:e.low[t],close:e.close[t],volume:e.volume?e.volume[t]:e.volume,timestamp:e.timestamp?e.timestamp[t]:e.timestamp});o.value&&(this.result.open.push(o.value.open),this.result.high.push(o.value.high),this.result.low.push(o.value.low),this.result.close.push(o.value.close),this.result.volume.push(o.value.volume),this.result.timestamp.push(o.value.timestamp))})}nextValue(e){const r=this.generator.next(e).value;return r}}Re.calculate=M;class je{constructor(){}approximateEqual(e,r){const t=1*parseFloat(X(e-r).toPrecision(4)),o=1*parseFloat((1e-3*e).toPrecision(4));return t<=o}logic(){throw new Error("this has to be implemented")}getAllPatternIndex(e){if(e.close.length<this.requiredCount)return console.warn("Data count less than data required for the strategy ",this.name),[];e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse());const r=this.logic;return this._generateDataForCandleStick(e).map((e,t)=>r.call(this,e)?t:void 0).filter((e)=>e)}hasPattern(e){if(e.close.length<this.requiredCount)return console.warn("Data count less than data required for the strategy ",this.name),!1;e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse());const r=this.logic;return r.call(this,this._getLastDataForCandleStick(e))}_getLastDataForCandleStick(e){const r=this.requiredCount;if(e.close.length===r)return e;else{const t={open:[],high:[],low:[],close:[]};let o=0;for(const l=e.close.length-r;o<r;)t.open.push(e.open[l+o]),t.high.push(e.high[l+o]),t.low.push(e.low[l+o]),t.close.push(e.close[l+o]),o++;return t}}_generateDataForCandleStick(e){const r=this.requiredCount,t=e.close.map(function(t,o){let l=0;const a={open:[],high:[],low:[],close:[]};for(;l<r;)a.open.push(e.open[o+l]),a.high.push(e.high[o+l]),a.low.push(e.low[o+l]),a.close.push(e.close[o+l]),l++;return a}).filter((t,o)=>o<=e.close.length-r);return t}}class Oe extends je{constructor(){super(),this.name="BullishEngulfingPattern",this.requiredCount=2}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1];return t<r&&r>a&&t>a&&r<n}}class ye extends je{constructor(){super(),this.name="BullishHammerStick",this.requiredCount=1}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0];let a=t>r;return a=a&&this.approximateEqual(t,o),a=a&&t-r<=2*(r-l),a}}class Fe extends je{constructor(){super(),this.requiredCount=2,this.name="BullishHarami"}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1];return r>a&&t<a&&t<n&&r>u&&o>s}}class We extends je{constructor(){super(),this.requiredCount=2,this.name="BullishHaramiCross"}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=this.approximateEqual(a,n);return r>a&&t<a&&t<n&&r>u&&o>s&&i}}class Ue extends je{constructor(){super(),this.name="BullishInvertedHammerStick",this.requiredCount=1}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0];let a=t>r;return a=a&&this.approximateEqual(r,l),a=a&&t-r<=2*(o-t),a}}class Ke extends je{constructor(){super(),this.name="BullishMarubozu",this.requiredCount=1}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=this.approximateEqual(t,o)&&this.approximateEqual(l,r)&&r<t&&r<o;return a}}class Ge extends je{constructor(){super(),this.requiredCount=3,this.name="DownsideTasukiGap"}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return t<r&&n<a&&h>i&&s<l&&a>i&&n<i&&h>a&&h<t}}class Xe extends je{constructor(){super(),this.name="BearishHammerStick",this.requiredCount=1}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0];let a=r>t;return a=a&&this.approximateEqual(r,o),a=a&&r-t<=2*(t-l),a}}class Ne extends je{constructor(){super(),this.name="BearishInvertedHammerStick",this.requiredCount=1}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0];let a=r>t;return a=a&&this.approximateEqual(t,l),a=a&&r-t<=2*(o-r),a}}class Je extends je{constructor(){super(),this.name="HammerPattern",this.requiredCount=5}logic(e){let r=this.downwardTrend(e);return r=r&&this.includesHammer(e),r=r&&this.hasConfirmation(e),r}downwardTrend(e,r=!0){const t=r?3:4,o=u({values:e.close.slice(0,t),period:t-1}),l=i({values:e.close.slice(0,t),period:t-1});return l>o}includesHammer(e,r=!0){const t=r?3:4,o=r?4:void 0,l={open:e.open.slice(t,o),close:e.close.slice(t,o),low:e.low.slice(t,o),high:e.high.slice(t,o)};let a=j(l);return a=a||O(l),a=a||D(l),a=a||R(l),a}hasConfirmation(e){const r={open:e.open[3],close:e.close[3],low:e.low[3],high:e.high[3]},t={open:e.open[4],close:e.close[4],low:e.low[4],high:e.high[4]},o=t.open<t.close;return o&&r.close<t.close}}class Qe extends Je{constructor(){super(),this.name="HammerPatternUnconfirmed"}logic(e){let r=this.downwardTrend(e,!1);return r=r&&this.includesHammer(e,!1),r}}class Ye extends je{constructor(){super(),this.name="Doji",this.requiredCount=1}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=this.approximateEqual(r,t),n=a&&this.approximateEqual(r,o),s=a&&this.approximateEqual(t,l);return a&&n===s}}class Ze extends je{constructor(){super(),this.name="MorningDojiStar",this.requiredCount=3}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2],d=new Ye().hasPattern({open:[a],close:[n],high:[s],low:[u]});return t<r&&d&&i<h&&s<l&&u<l&&i>s&&n<i&&h>(r+t)/2}}class $e extends je{constructor(){super(),this.name="MorningStar",this.requiredCount=3}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return t<r&&l>u&&l>s&&s<l&&u<l&&i>s&&n<i&&i<h&&h>(r+t)/2}}class er extends je{constructor(){super(),this.requiredCount=2,this.name="PiercingLine"}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1];return u<l&&t<r&&l>a&&n>(r+t)/2&&n>a}}class rr extends je{constructor(){super(),this.name="ThreeWhiteSoldiers",this.requiredCount=3}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return s>o&&p>s&&r<t&&a<n&&i<h&&t>a&&a<o&&s>i&&i<n}}class tr extends je{constructor(){super(),this.name="TweezerBottom",this.requiredCount=5}logic(e){return this.downwardTrend(e)&&e.low[3]===e.low[4]}downwardTrend(e){const r=u({values:e.close.slice(0,3),period:2}),t=i({values:e.close.slice(0,3),period:2});return t>r}}const or=[new Oe,new Ge,new Fe,new We,new Ze,new $e,new Ke,new er,new rr,new ye,new Ue,new Je,new Qe,new tr];class lr extends je{constructor(){super(),this.name="Bullish Candlesticks"}hasPattern(e){return or.reduce(function(r,t){const o=t.hasPattern(e);return r||o},!1)}}class ar extends je{constructor(){super(),this.name="BearishEngulfingPattern",this.requiredCount=2}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1];return t>r&&r<a&&t<a&&r>n}}class nr extends je{constructor(){super(),this.requiredCount=2,this.name="BearishHarami"}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1];return r<a&&t>a&&t>n&&r<u&&o>s}}class sr extends je{constructor(){super(),this.requiredCount=2,this.name="BearishHaramiCross"}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=this.approximateEqual(a,n);return r<a&&t>a&&t>n&&r<u&&o>s&&i}}class ur extends je{constructor(){super(),this.name="BearishMarubozu",this.requiredCount=1}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=this.approximateEqual(r,o)&&this.approximateEqual(l,t)&&r>t&&r>l;return a}}class ir extends je{constructor(){super(),this.name="EveningDojiStar",this.requiredCount=3}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2],d=new Ye().hasPattern({open:[a],close:[n],high:[s],low:[u]});return t>r&&d&&s>o&&u>o&&i<u&&n>i&&i>h&&h<(r+t)/2}}class hr extends je{constructor(){super(),this.name="EveningStar",this.requiredCount=3}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return t>r&&o<u&&o<s&&s>o&&u>o&&i<u&&n>i&&i>h&&h<(r+t)/2}}class pr extends je{constructor(){super(),this.name="HangingMan",this.requiredCount=5}logic(e){let r=this.upwardTrend(e);return r=r&&this.includesHammer(e),r=r&&this.hasConfirmation(e),r}upwardTrend(e,r=!0){const t=r?3:4,o=u({values:e.close.slice(0,t),period:t-1}),l=i({values:e.close.slice(0,t),period:t-1});return o>l}includesHammer(e,r=!0){const t=r?3:4,o=r?4:void 0,l={open:e.open.slice(t,o),close:e.close.slice(t,o),low:e.low.slice(t,o),high:e.high.slice(t,o)};let a=j(l);return a=a||D(l),a}hasConfirmation(e){const r={open:e.open[3],close:e.close[3],low:e.low[3],high:e.high[3]},t={open:e.open[4],close:e.close[4],low:e.low[4],high:e.high[4]},o=t.open>t.close;return o&&r.close>t.close}}class gr extends pr{constructor(){super(),this.name="HangingManUnconfirmed"}logic(e){let r=this.upwardTrend(e,!1);return r=r&&this.includesHammer(e,!1),r}}class dr extends je{constructor(){super(),this.name="ShootingStar",this.requiredCount=5}logic(e){let r=this.upwardTrend(e);return r=r&&this.includesHammer(e),r=r&&this.hasConfirmation(e),r}upwardTrend(e,r=!0){const t=r?3:4,o=u({values:e.close.slice(0,t),period:t-1}),l=i({values:e.close.slice(0,t),period:t-1});return o>l}includesHammer(e,r=!0){const t=r?3:4,o=r?4:void 0,l={open:e.open.slice(t,o),close:e.close.slice(t,o),low:e.low.slice(t,o),high:e.high.slice(t,o)};let a=O(l);return a=a||R(l),a}hasConfirmation(e){const r={open:e.open[3],close:e.close[3],low:e.low[3],high:e.high[3]},t={open:e.open[4],close:e.close[4],low:e.low[4],high:e.high[4]},o=t.open>t.close;return o&&r.close>t.close}}class vr extends dr{constructor(){super(),this.name="ShootingStarUnconfirmed"}logic(e){let r=this.upwardTrend(e,!1);return r=r&&this.includesHammer(e,!1),r}}class cr extends je{constructor(){super(),this.name="ThreeBlackCrows",this.requiredCount=3}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return l>u&&u>g&&r>t&&a>n&&i>h&&r>a&&a>t&&a>i&&i>n}}class mr extends je{constructor(){super(),this.name="TweezerTop",this.requiredCount=5}logic(e){return this.upwardTrend(e)&&e.high[3]===e.high[4]}upwardTrend(e){const r=u({values:e.close.slice(0,3),period:2}),t=i({values:e.close.slice(0,3),period:2});return r>t}}const xr=[new ar,new nr,new sr,new ir,new hr,new ur,new cr,new Xe,new Ne,new pr,new gr,new dr,new vr,new mr];class wr extends je{constructor(){super(),this.name="Bearish Candlesticks"}hasPattern(e){return xr.reduce(function(r,t){return r||t.hasPattern(e)},!1)}}class fr extends je{constructor(){super(),this.name="AbandonedBaby",this.requiredCount=3}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2],d=new Ye().hasPattern({open:[a],close:[n],high:[s],low:[u]});return t<r&&d&&s<l&&g>s&&h>i&&p<r}}class Ir extends je{constructor(){super(),this.name="DarkCloudCover",this.requiredCount=2}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=e.open[1],n=e.close[1],s=e.high[1],u=e.low[1];return t>r&&n<a&&a>o&&n<(t+r)/2&&n>r}}class _r extends je{constructor(){super(),this.requiredCount=1,this.name="DragonFlyDoji"}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=this.approximateEqual(r,t),n=a&&this.approximateEqual(r,o),s=a&&this.approximateEqual(t,l);return a&&n&&!s}}class Pr extends je{constructor(){super(),this.requiredCount=1,this.name="GraveStoneDoji"}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=this.approximateEqual(r,t),n=a&&this.approximateEqual(r,o),s=a&&this.approximateEqual(t,l);return a&&s&&!n}}class br extends je{constructor(){super(),this.name="BullishSpinningTop",this.requiredCount=1}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=X(t-r),n=X(o-t),s=X(r-l);return a<n&&a<s}}class Cr extends je{constructor(){super(),this.name="BearishSpinningTop",this.requiredCount=1}logic(e){const r=e.open[0],t=e.close[0],o=e.high[0],l=e.low[0],a=X(t-r),n=X(o-r),s=X(o-l);return a<n&&a<s}}class qr extends ee{constructor(e){super(e),this.result=[];const r=Object.assign({},{conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},e),t=new Q(2*r.conversionPeriod,!0,!0,!1),o=new Q(2*r.basePeriod,!0,!0,!1),l=new Q(2*r.spanPeriod,!0,!0,!1);this.generator=function*(){let e,a;const n=G(r.conversionPeriod,r.basePeriod,r.spanPeriod,r.displacement);let s=1;for(a=yield;;){if(t.push(a.high),t.push(a.low),o.push(a.high),o.push(a.low),l.push(a.high),l.push(a.low),s<n)s++;else{const r=(t.periodHigh+t.periodLow)/2,a=(o.periodHigh+o.periodLow)/2,n=(l.periodHigh+l.periodLow)/2;e={conversion:r,base:a,spanA:(r+a)/2,spanB:n}}a=yield e}}(),this.generator.next(),e.low.forEach((r,t)=>{const o=this.generator.next({high:e.high[t],low:e.low[t]});o.value&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}qr.calculate=y;class Er extends ee{constructor(e){super(e);const r=e.useSMA?re:te,t=new r({period:e.maPeriod,values:[],format:(e)=>e}),o=new xe({period:e.atrPeriod,high:[],low:[],close:[],format:(e)=>e});let l;this.result=[],this.generator=function*(){let r;for(l=yield;;){const{close:a}=l,n=t.nextValue(a),s=o.nextValue(l);n!==void 0&&s!==void 0&&(r={middle:n,upper:n+e.multiplier*s,lower:n-e.multiplier*s}),l=yield r}}(),this.generator.next();const a=e.high;a.forEach((r,t)=>{const o={high:r,low:e.low[t],close:e.close[t]},l=this.generator.next(o);l.value!==void 0&&this.result.push(l.value)})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return r.value}}Er.calculate=F;class Sr extends ee{constructor(e){super(e);const r=e.high,t=e.low,o=e.close;this.result=[];const l=new xe({period:e.period,high:[],low:[],close:[],format:(e)=>e}),a=new Q(2*e.period,!0,!0,!1);this.generator=function*(){for(let r,t,o=yield;;){const{high:n,low:s}=o;a.push(n),a.push(s),t=l.nextValue(o),a.totalPushed>=2*e.period&&t!==void 0&&(r={exitLong:a.periodHigh-t*e.multiplier,exitShort:a.periodLow+t*e.multiplier}),o=yield r}}(),this.generator.next(),r.forEach((e,r)=>{const l={high:e,low:t[r],close:o[r]},a=this.generator.next(l);a.value!==void 0&&this.result.push(a.value)})}nextValue(e){const r=this.generator.next(e);if(r.value!==void 0)return r.value}}Sr.calculate=W;let Vr=U();e.getAvailableIndicators=U,e.AvailableIndicators=Vr,e.FixedSizeLinkedList=Q,e.CandleData=class{},e.CandleList=Y,e.sma=o,e.SMA=re,e.ema=l,e.EMA=te,e.wma=a,e.WMA=oe,e.wema=n,e.WEMA=le,e.macd=s,e.MACD=ae,e.rsi=h,e.RSI=ue,e.bollingerbands=g,e.BollingerBands=he,e.adx=v,e.ADX=me,e.atr=c,e.ATR=xe,e.truerange=d,e.TrueRange=ve,e.roc=m,e.ROC=we,e.kst=x,e.KST=fe,e.psar=w,e.PSAR=Ie,e.stochastic=f,e.Stochastic=_e,e.williamsr=I,e.WilliamsR=Pe,e.adl=_,e.ADL=be,e.obv=P,e.OBV=Ce,e.trix=b,e.TRIX=qe,e.forceindex=C,e.ForceIndex=Ee,e.cci=q,e.CCI=Se,e.awesomeoscillator=E,e.AwesomeOscillator=Ve,e.vwap=S,e.VWAP=ke,e.volumeprofile=k,e.VolumeProfile=He,e.mfi=H,e.MFI=Be,e.stochasticrsi=z,e.StochasticRSI=Ae,e.averagegain=u,e.AverageGain=ne,e.averageloss=i,e.AverageLoss=se,e.sd=p,e.SD=ie,e.highest=B,e.Highest=Le,e.lowest=A,e.Lowest=Te,e.sum=L,e.Sum=Me,e.renko=T,e.HeikinAshi=Re,e.heikinashi=M,e.bullish=function(e){return new lr().hasPattern(e)},e.bearish=function(e){return new wr().hasPattern(e)},e.abandonedbaby=function(e){return new fr().hasPattern(e)},e.doji=function(e){return new Ye().hasPattern(e)},e.bearishengulfingpattern=function(e){return new ar().hasPattern(e)},e.bullishengulfingpattern=function(e){return new Oe().hasPattern(e)},e.darkcloudcover=function(e){return new Ir().hasPattern(e)},e.downsidetasukigap=function(e){return new Ge().hasPattern(e)},e.dragonflydoji=function(e){return new _r().hasPattern(e)},e.gravestonedoji=function(e){return new Pr().hasPattern(e)},e.bullishharami=function(e){return new Fe().hasPattern(e)},e.bearishharami=function(e){return new nr().hasPattern(e)},e.bullishharamicross=function(e){return new We().hasPattern(e)},e.bearishharamicross=function(e){return new sr().hasPattern(e)},e.eveningdojistar=function(e){return new ir().hasPattern(e)},e.eveningstar=function(e){return new hr().hasPattern(e)},e.morningdojistar=function(e){return new Ze().hasPattern(e)},e.morningstar=function(e){return new $e().hasPattern(e)},e.bullishmarubozu=function(e){return new Ke().hasPattern(e)},e.bearishmarubozu=function(e){return new ur().hasPattern(e)},e.piercingline=function(e){return new er().hasPattern(e)},e.bullishspinningtop=function(e){return new br().hasPattern(e)},e.bearishspinningtop=function(e){return new Cr().hasPattern(e)},e.threeblackcrows=function(e){return new cr().hasPattern(e)},e.threewhitesoldiers=function(e){return new rr().hasPattern(e)},e.bullishhammerstick=D,e.bearishhammerstick=j,e.bullishinvertedhammerstick=R,e.bearishinvertedhammerstick=O,e.hammerpattern=function(e){return new Je().hasPattern(e)},e.hammerpatternunconfirmed=function(e){return new Qe().hasPattern(e)},e.hangingman=function(e){return new pr().hasPattern(e)},e.hangingmanunconfirmed=function(e){return new gr().hasPattern(e)},e.shootingstar=function(e){return new dr().hasPattern(e)},e.shootingstarunconfirmed=function(e){return new vr().hasPattern(e)},e.tweezertop=function(e){return new mr().hasPattern(e)},e.tweezerbottom=function(e){return new tr().hasPattern(e)},e.fibonacciretracement=function(e,r){const t=[0,23.6,38.2,50,61.8,78.6,100,127.2,161.8,261.8,423.6];let o;return o=e<r?t.map(function(t){const o=r-X(e-r)*t/100;return 0<o?o:0}):t.map(function(t){const o=r+X(e-r)*t/100;return 0<o?o:0}),o},e.ichimokucloud=y,e.IchimokuCloud=qr,e.keltnerchannels=F,e.KeltnerChannels=Er,e.KeltnerChannelsInput=class extends ${constructor(){super(...arguments),this.maPeriod=20,this.atrPeriod=10,this.useSMA=!1,this.multiplier=1}},e.KeltnerChannelsOutput=class extends ${},e.chandelierexit=W,e.ChandelierExit=Sr,e.ChandelierExitInput=class extends ${constructor(){super(...arguments),this.period=22,this.multiplier=3}},e.ChandelierExitOutput=class extends ${},e.setConfig=function(e,r){Z[e]=r},e.getConfig=r})(this.window=this.window||{});
